package com.novelot.progressdemo;import android.app.Activity;import android.os.Bundle;import android.os.Handler;import android.util.Log;import android.view.View;import android.widget.ImageView;import android.widget.ProgressBar;import android.widget.RelativeLayout;import android.widget.RelativeLayout.LayoutParams;public class ProgressActivity extends Activity { private ProgressBar progress; private ImageView image; private Handler mHandler; private LayoutParams lp; private float pro = 0; private double a; private double width; private double offest; /** Called when the activity is first created. */ @Override public void onCreate(Bundle savedInstanceState) {  super.onCreate(savedInstanceState);  setContentView(R.layout.selfdef1);  progress = (ProgressBar) findViewById(R.id.myProgress);  image = (ImageView) findViewById(R.id.image);  mHandler = new Handler();  new Thread(new Runnable() {   public void run() {    while (pro < progress.getMax()) {     pro += 1;     a = pro / progress.getMax();     width = progress.getWidth();     offest = a * width - image.getWidth() / 2;     Log.d("isRun", "a--->" + a + "width ------>" + width       + "offest ------->" + offest);     try {      Thread.sleep(50);     } catch (InterruptedException e) {      e.printStackTrace();     }     mHandler.post(new Runnable() {      public void run() {       if (offest >= 30         && offest <= progress.getWidth() - 90) {        lp = new LayoutParams(          LayoutParams.WRAP_CONTENT,          LayoutParams.WRAP_CONTENT);        lp.setMargins((int) offest, 5, 0, 0);        lp.addRule(RelativeLayout.CENTER_VERTICAL);        image.setVisibility(View.VISIBLE);        image.setLayoutParams(lp);       } else if(offest > progress.getWidth() - 90){        image.setVisibility(View.GONE);        pro = 0;        finish();       }       progress.setProgress((int) pro);      }     });    }       }  }).start(); }}