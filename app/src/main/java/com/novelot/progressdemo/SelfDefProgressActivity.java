package com.novelot.progressdemo;import android.app.Activity;import android.graphics.drawable.ClipDrawable;import android.os.Bundle;import android.os.Handler;import android.util.DisplayMetrics;import android.util.Log;import android.view.View;import android.view.animation.Animation;import android.view.animation.LinearInterpolator;import android.view.animation.TranslateAnimation;import android.widget.AbsoluteLayout;import android.widget.ImageView;import android.widget.LinearLayout;import android.widget.Toast;public class SelfDefProgressActivity extends Activity { private ImageView mView; ImageView mImageView01; int a = 6; int ScreenY; ClipDrawable cd; @SuppressWarnings("deprecation") @Override public void onCreate(Bundle savedInstanceState) {  super.onCreate(savedInstanceState);  setContentView(R.layout.selfdef);    Toast.makeText(this, "SelfDefProgressActivity", 0).show();  /*   * ImageView iv=(ImageView) findViewById(R.id.iv_c);   * iv.setVisibility(View.VISIBLE);   * iv.setAnimation(outToRightAnimation()); //iv.setScaleType(scaleType);   * LayoutParams params = new LayoutParams(params); params.x =   * -80;//设置x坐标 params.y = -60;//设置y坐标 iv.setLayoutParams(new   * LayoutParams(arg0))   */  /* 取得屏幕对象 */  DisplayMetrics dm = new DisplayMetrics();  getWindowManager().getDefaultDisplay().getMetrics(dm);  /* 取得屏幕解析像素 */  int ScreenX = dm.widthPixels;  ScreenY = dm.heightPixels;  Toast.makeText(    this,    "" + ScreenX + ":" + ScreenY + "   "      + (ScreenY / 2 - ((ScreenY * 22) / 480)), 1).show();  Log.d("b", ScreenX + ":" + ScreenY);  mImageView01 = (ImageView) findViewById(R.id.iv_c);  mImageView01.setVisibility(View.VISIBLE);  mImageView01.setLayoutParams(new AbsoluteLayout.LayoutParams(20, 20,    (int) 100, 100));  mView = new ImageView(this) {   {    setImageResource(R.drawable.clip_bitmap_4);    setBackgroundResource(R.drawable.clip_btimap_content2);    cd = (ClipDrawable) getDrawable();    cd.setLevel(100);    setOnClickListener(new OnClickListener() {     public void onClick(View v) {      if (cd.getLevel() >= 9500) {       a = 6;       cd.setLevel(100);      }      cd.setLevel(cd.getLevel() + 100);     }    });    mHandler.sendEmptyMessageDelayed(1, 100);   }  };  ((LinearLayout) findViewById(R.id.self_layout)).addView(mView); } private final Handler mHandler = new Handler() {  public void handleMessage(android.os.Message msg) {   if (mView != null) {    a += 3;    if (a > 308) {     a = 9;     cd.setLevel(10000);    }    // Log.e("b","a="+a+":v="+cd.getLevel());12/480=x/y    mImageView01      .setLayoutParams(new AbsoluteLayout.LayoutParams(20,        20, (int) a,        (ScreenY / 2 - ((ScreenY * 6) / 480))));    mView.performClick();    // mView.setOnTouchListener(l);    // mView.dispatchTouchEvent(MotionEvent.obtain(SystemClock.uptimeMillis(),    // SystemClock.uptimeMillis(), MotionEvent.ACTION_DOWN, 300,    // 200, 0));    sendEmptyMessageDelayed(1, 100);   }  }; }; protected Animation outToRightAnimation() {  Animation outtoRight = new TranslateAnimation(  Animation.RELATIVE_TO_PARENT, -1.0f,  Animation.RELATIVE_TO_PARENT, +1.0f,  Animation.RELATIVE_TO_PARENT, 0.0f,  Animation.RELATIVE_TO_PARENT, 0.0f);  outtoRight.setDuration(2000);  // outtoRight.setStartOffset(startOffset)  outtoRight.setInterpolator(new LinearInterpolator());  outtoRight.setRepeatCount(Animation.INFINITE);  return outtoRight; }}